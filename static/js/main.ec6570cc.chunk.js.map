{"version":3,"sources":["components/PostsList/PostsList.tsx","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","api/posts.ts","api/comments.ts","components/Loader/Loader.tsx","App.tsx","index.tsx"],"names":["PostsList","postsList","selectedPostId","downLoadComments","downloadPostDetails","className","length","map","post","userId","id","title","type","onClick","NewCommentForm","name","placeholder","PostDetails","postComments","postDetails","counterComments","useState","showComments","setShowComments","comment","formMethod","body","BASE_URL","getUserPosts","a","endPoint","console","log","fetch","response","ok","Error","headers","get","includes","Promise","reject","json","getPostDetails","postId","getPostComments","Loader","App","setPostsList","currentUser","setCurrentUser","setSelectedPostId","createdAt","updatedAt","setPostDetails","setPostComments","downloadPosts","posts","newPostDetails","comments","onChange","e","target","value","style","visibility","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ec6570cc.chunk.js","sourcesContent":["import React from 'react';\r\nimport './PostsList.scss';\r\n\r\ntype Props = {\r\n  postsList: Post[];\r\n  selectedPostId: string;\r\n  downLoadComments: (id: string) => void;\r\n  downloadPostDetails: (postId: string) => void;\r\n};\r\n\r\nexport const PostsList: React.FC<Props> = ({\r\n  postsList,\r\n  selectedPostId,\r\n  downLoadComments,\r\n  downloadPostDetails,\r\n}) => {\r\n  return (\r\n    <div className=\"PostsList\">\r\n      <h2>Posts:</h2>\r\n      <p>{`Count posts: ${postsList.length}`}</p>\r\n\r\n      <ul className=\"PostsList__list\">\r\n        {postsList.map((post: Post) => (\r\n          <li\r\n            key={post.id}\r\n            className=\"PostsList__item\"\r\n            data-cy=\"postDetails\"\r\n          >\r\n            <div>\r\n              <b>{`[User #${post.userId}]: `}</b>\r\n              {post.id}\r\n              :\r\n              {post.title}\r\n            </div>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"PostsList__button button\"\r\n              onClick={() => {\r\n                downLoadComments(post.id);\r\n                downloadPostDetails(post.id);\r\n              }}\r\n            >\r\n              {(selectedPostId === post.id) ? 'Close' : 'Open'}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport './NewCommentForm.scss';\r\n\r\nexport const NewCommentForm: React.FC = () => (\r\n  <form className=\"NewCommentForm\">\r\n    <div className=\"form-field\">\r\n      <input\r\n        type=\"text\"\r\n        name=\"name\"\r\n        placeholder=\"Your name\"\r\n        className=\"NewCommentForm__input\"\r\n      />\r\n    </div>\r\n\r\n    <div className=\"form-field\">\r\n      <input\r\n        type=\"text\"\r\n        name=\"email\"\r\n        placeholder=\"Your email\"\r\n        className=\"NewCommentForm__input\"\r\n      />\r\n    </div>\r\n\r\n    <div className=\"form-field\">\r\n      <textarea\r\n        name=\"body\"\r\n        placeholder=\"Type comment here\"\r\n        className=\"NewCommentForm__input NewCommentForm__input--textarea\"\r\n      />\r\n    </div>\r\n\r\n    <button\r\n      type=\"submit\"\r\n      className=\"NewCommentForm__submit-button button\"\r\n    >\r\n      Add a comment\r\n    </button>\r\n  </form>\r\n);\r\n","import React, { useState } from 'react';\r\nimport { NewCommentForm } from '../NewCommentForm';\r\nimport './PostDetails.scss';\r\n\r\ntype Props = {\r\n  postComments: Comment[];\r\n  postDetails: Post;\r\n};\r\n\r\n// can't import from react-app-env.ts\r\ntype Comment = {\r\n  id: string;\r\n  postId: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  name: string;\r\n  email: string;\r\n  body: string;\r\n};\r\n\r\nexport const PostDetails: React.FC<Props> = ({\r\n  postComments,\r\n  postDetails,\r\n}) => {\r\n  // const postTitle = postDetails.title;\r\n  const counterComments = postComments.length;\r\n  const [showComments, setShowComments] = useState(true);\r\n\r\n  return (\r\n    <div className=\"PostDetails\">\r\n      <h2>Post details:</h2>\r\n\r\n      <section className=\"PostDetails__post\">\r\n        <p>{postDetails.title}</p>\r\n      </section>\r\n\r\n      <section className=\"PostDetails__comments\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"PostDetails__button button\"\r\n          onClick={() => setShowComments(!showComments)}\r\n        >\r\n          { showComments\r\n            ? `Hide ${counterComments} comments`\r\n            : 'Show comments' }\r\n        </button>\r\n\r\n        { showComments && (\r\n          <ul\r\n            className=\"PostDetails__list\"\r\n            data-cy=\"postList\"\r\n          >\r\n            {postComments.map((comment: Comment) => (\r\n              <li\r\n                key={comment.id}\r\n                className=\"PostDetails__list-item\"\r\n              >\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"PostDetails__remove-button button\"\r\n                  formMethod=\"DELETE\"\r\n                >\r\n                  X\r\n                </button>\r\n                <p>\r\n                  {comment.body}\r\n                </p>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </section>\r\n\r\n      <section>\r\n        <div className=\"PostDetails__form-wrapper\">\r\n          <NewCommentForm />\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n","export const BASE_URL = 'https://mate.academy/students-api';\r\n\r\nexport async function getUserPosts(userId: string): Promise<never[]> {\r\n  const addUrl = '/posts?userId=';\r\n  const addUrlForAllUsers = '/posts';\r\n\r\n  const endPoint = `${BASE_URL}${\r\n    (userId === '0')\r\n      ? addUrlForAllUsers\r\n      : addUrl + userId\r\n  }`;\r\n\r\n  // eslint-disable-next-line no-console\r\n  console.log('userId:', userId, 'endPoint:', endPoint);\r\n\r\n  const response = await fetch(endPoint);\r\n\r\n  if (!response.ok) {\r\n    throw new Error('error');\r\n  }\r\n\r\n  if (!response.headers.get('content-type')?.includes('application/json')) {\r\n    // eslint-disable-next-line prefer-promise-reject-errors\r\n    return Promise.reject('Content type is not supported');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function getPostDetails(postId: string): Promise<Post> {\r\n  const addUrl = '/posts/';\r\n  const endPoint = `${BASE_URL}${addUrl}${postId}`;\r\n\r\n  // eslint-disable-next-line no-console\r\n  console.log('postId:', postId, 'endPoint:', endPoint);\r\n\r\n  const response = await fetch(endPoint);\r\n\r\n  if (!response.ok) {\r\n    throw new Error('error');\r\n  }\r\n\r\n  if (!response.headers.get('content-type')?.includes('application/json')) {\r\n    // eslint-disable-next-line prefer-promise-reject-errors\r\n    return Promise.reject('Content type is not supported');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","export const BASE_URL = 'https://mate.academy/students-api';\r\n\r\nexport async function getPostComments(postId: string): Promise<never[]> {\r\n  const addUrl = '/comments?postId=';\r\n  const endPoint = `${BASE_URL}${addUrl}${postId}`;\r\n\r\n  // eslint-disable-next-line no-console\r\n  console.log('postId:', postId, 'endPoint:', endPoint);\r\n\r\n  const response = await fetch(endPoint);\r\n\r\n  if (!response.ok) {\r\n    throw new Error('error');\r\n  }\r\n\r\n  if (!response.headers.get('content-type')?.includes('application/json')) {\r\n    // eslint-disable-next-line prefer-promise-reject-errors\r\n    return Promise.reject('Content type is not supported');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n","import React from 'react';\r\nimport './Loader.scss';\r\n\r\nexport const Loader: React.FC = () => (\r\n  <div className=\"Loader\">\r\n    <div className=\"Loader__content\" />\r\n  </div>\r\n);\r\n","import React, { useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getUserPosts, getPostDetails } from './api/posts';\nimport { getPostComments } from './api/comments';\nimport { Loader } from './components/Loader';\n\n// yoyoyooyooyooy\n\nconst App: React.FC = () => {\n  const [postsList, setPostsList] = useState([]);\n  const [currentUser, setCurrentUser] = useState('');\n  const [selectedPostId, setSelectedPostId] = useState('');\n  const [postDetails, setPostDetails] = useState({\n    id: '',\n    userId: '',\n    title: '',\n    body: '',\n    createdAt: '',\n    updatedAt: '',\n  });\n  const [postComments, setPostComments] = useState([]);\n\n  const downloadPosts = async (userId: string) => {\n    // eslint-disable-next-line no-console\n    console.log(userId);\n\n    if (currentUser !== userId) {\n      const posts = await getUserPosts(userId);\n\n      setSelectedPostId('');\n      setPostDetails({\n        id: '',\n        userId: '',\n        title: '',\n        body: '',\n        createdAt: '',\n        updatedAt: '',\n      });\n      setCurrentUser(userId);\n      setPostsList(posts);\n    }\n  };\n\n  const downloadPostDetails = async (postId: string) => {\n    // eslint-disable-next-line no-console\n    console.log(postId);\n\n    const newPostDetails = await getPostDetails(postId);\n\n    setPostDetails(newPostDetails);\n\n    // eslint-disable-next-line @typescript-eslint/no-implied-eval\n    // const timerId = window.setTimeout(setPostDetails, 5000, newPostDetails);\n\n    // window.clearTimeout(timerId);\n  };\n\n  const downLoadComments = async (id: string) => {\n    if (selectedPostId === id) {\n      setSelectedPostId('');\n    } else {\n      const comments = await getPostComments(id);\n\n      setSelectedPostId(id);\n      setPostComments(comments);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            onChange={e => downloadPosts(e.target.value)}\n          >\n            <option value=\"0\">All users</option>\n            <option value=\"1\">Leanne Graham</option>\n            <option value=\"2\">Ervin Howell</option>\n            <option value=\"3\">Clementine Bauch</option>\n            <option value=\"4\">Patricia Lebsack</option>\n            <option value=\"5\">Chelsey Dietrich</option>\n            <option value=\"6\">Mrs. Dennis Schulist</option>\n            <option value=\"7\">Kurtis Weissnat</option>\n            <option value=\"8\">Nicholas Runolfsdottir V</option>\n            <option value=\"9\">Glenna Reichert</option>\n            <option value=\"10\">Leanne Graham</option>\n          </select>\n        </label>\n\n        <p>{`selectedPostId: ${selectedPostId}`}</p>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            postsList={postsList}\n            selectedPostId={selectedPostId}\n            downloadPostDetails={downloadPostDetails}\n            downLoadComments={downLoadComments}\n          />\n        </div>\n\n        <div\n          className=\"App__content\"\n          style={{\n            visibility: `${!selectedPostId ? 'hidden' : 'visible'}`,\n          }}\n        >\n          {!postDetails.id ? (\n            <div>\n              <Loader />\n            </div>\n          ) : (\n            <PostDetails\n              postComments={postComments}\n              postDetails={postDetails}\n            />\n          )}\n        </div>\n\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\r\n\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}