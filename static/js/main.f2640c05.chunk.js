(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(9),s=n.n(c),a=n(4),r=n(2),o=n(3),l=n.n(o),i=n(1),u=n.n(i),m=n(7),j=n.n(m),d=(n(15),n(16),"https://mate.academy/students-api"),b=function(){var e=Object(a.a)(l.a.mark((function e(t){var n,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{method:"GET"},console.log("request to: ".concat(d).concat(t)),console.log("request options:",n),e.next=5,fetch("".concat(d).concat(t),n);case 5:if((c=e.sent).ok){e.next=8;break}return e.abrupt("return",Promise.reject("".concat(c.status," - ").concat(c.statusText)));case 8:return e.abrupt("return",c.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return b("/posts/".concat(e))},O=(n(17),n(0)),h=function(){return Object(O.jsx)("div",{className:"Loader",children:Object(O.jsx)("div",{className:"Loader__content"})})},f=(n(19),function(e){var t=e.currentUserId,n=e.selectedPostId,c=e.setSelectedPostId,s=Object(i.useState)([]),o=Object(r.a)(s,2),u=o[0],m=o[1],d=Object(i.useState)(!1),p=Object(r.a)(d,2),f=p[0],x=p[1],v=function(){var e=Object(a.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,b("All"===(c=t)?"/posts":"/posts?userId=".concat(c));case 4:n=e.sent,m(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("error",e.t0);case 11:return e.prev=11,x(!1),e.finish(11);case 14:case"end":return e.stop()}var c}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){c(null),v()}),[t]);return Object(O.jsxs)("div",{className:j()("PostsList",{"PostsList--empty":!t}),children:[Object(O.jsx)("h2",{children:"Posts:"}),f?Object(O.jsx)(h,{}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{children:"Count posts: ".concat(u.length)}),Object(O.jsx)("ul",{className:"PostsList__list",children:u.map((function(e){return Object(O.jsxs)("li",{className:j()("PostsList__item",{"PostsList__item--active":e.id===n}),"data-cy":"postDetails",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("strong",{children:e.title}),":",Object(O.jsx)("br",{}),"".concat(e.body)]}),Object(O.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return t=e.id,void c(n&&t===n?null:t);var t},children:n===e.id?"Close":"Open"})]},e.id)}))})]})]})}),x=function(e){return t="/comments",n=e,console.log("POST data",JSON.stringify(n)),b(t,{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(n)});var t,n},v=function(e){return console.log("delete commentId = ",e),t="/comments/".concat(e),b(t,{method:"DELETE"});var t},_=n(6),N=n(5),P=(n(20),function(e){var t=e.selectedPostId,n=e.loadPostDetails,c={postId:t,name:"",email:"",body:""},s=Object(i.useState)(c),a=Object(r.a)(s,2),o=a[0],l=a[1],u=Object(i.useState)({name:!1,email:!1,body:!1}),m=Object(r.a)(u,2),j=m[0],d=m[1];Object(i.useEffect)((function(){l(c)}),[t]);var b=function(e){l(Object(N.a)(Object(N.a)({},o),{},Object(_.a)({},e.target.name,e.target.value))),d(Object(N.a)(Object(N.a)({},j),{},Object(_.a)({},e.target.name,!1)))},p=function(e){0===e.target.value.length&&d(Object(N.a)(Object(N.a)({},j),{},Object(_.a)({},e.target.name,!0)))};return Object(O.jsxs)("form",{className:"NewCommentForm",method:"POST",onSubmit:function(e){e.preventDefault(),d({name:0===o.name.length,email:0===o.email.length,body:0===o.body.length}),o.name.length>0&&o.email.length>0&&o.body.length>0&&(x(o).then((function(){return n()})),l(c),d({name:!1,email:!1,body:!1}))},children:[Object(O.jsxs)("div",{className:"NewCommentForm__form-field",children:[Object(O.jsx)("p",{className:"NewCommentForm__error",children:j.name?"Please enter a name":" "}),Object(O.jsx)("input",{type:"text",name:"name",placeholder:j.name?"":"Your name",className:"NewCommentForm__input",value:o.name,onChange:b,onBlur:function(e){return p(e)}})]}),Object(O.jsxs)("div",{className:"NewCommentForm__form-field",children:[j.email&&Object(O.jsx)("p",{className:"NewCommentForm__error",children:"Please enter an email"}),Object(O.jsx)("input",{type:"text",name:"email",placeholder:j.email?"":"Your email",className:"NewCommentForm__input",value:o.email,onChange:b,onBlur:function(e){return p(e)}})]}),Object(O.jsxs)("div",{className:"NewCommentForm__form-field",children:[j.body&&Object(O.jsx)("p",{className:"NewCommentForm__error NewCommentForm__error--text-area",children:"Please enter a comment"}),Object(O.jsx)("textarea",{name:"body",placeholder:j.body?"":"Type comment here",className:"NewCommentForm__input NewCommentForm__input--text-area",value:o.body,onChange:b,onBlur:function(e){return p(e)},rows:3,wrap:"hard"})]}),Object(O.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),g=(n(21),u.a.memo((function(e){var t=e.selectedPostId,n=e.setSelectedPostId;console.log("render PostDetails");var c=Object(i.useState)([]),s=Object(r.a)(c,2),o=s[0],u=s[1],m=Object(i.useState)(null),j=Object(r.a)(m,2),d=j[0],f=j[1],x=Object(i.useState)(!0),_=Object(r.a)(x,2),N=_[0],g=_[1],y=Object(i.useState)(!1),w=Object(r.a)(y,2),C=w[0],S=w[1],I=o.length,D=function(){var e=Object(a.a)(l.a.mark((function e(){var n,c,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,Promise.all([(o=t,b("/comments?postId=".concat(o))),p(t)]);case 4:n=e.sent,c=Object(r.a)(n,2),s=c[0],a=c[1],u(s),f(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("error",e.t0);case 15:return e.prev=15,S(!1),e.finish(15);case 18:case"end":return e.stop()}var o}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){t&&D()}),[t]);return Object(O.jsxs)("div",{className:"PostDetails",children:[Object(O.jsx)("h2",{children:"Post details:"}),d&&Object(O.jsxs)("section",{className:"PostDetails__post",children:[Object(O.jsx)("strong",{children:"".concat(d.title)}),Object(O.jsx)("p",{children:d.body})]}),C?Object(O.jsx)(h,{}):Object(O.jsxs)("section",{className:"PostDetails__comments",children:[I>0&&Object(O.jsx)("button",{type:"button",className:"PostDetails__button button",onClick:function(){return g(!N)},children:N?"Hide ".concat(I," comments"):"Show comments"}),N&&Object(O.jsx)("ul",{className:"PostDetails__list","data-cy":"postList",children:o.map((function(e){return Object(O.jsxs)("li",{className:"PostDetails__list-item",children:[Object(O.jsx)("button",{type:"button",className:"PostDetails__remove-button button",formMethod:"DELETE",onClick:function(){return c=e.id,void v(c).then((function(){var e=t;n(null),n(e)}));var c},children:"X"}),Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:e.name?"".concat(e.name,": "):"noname: "}),e.body]})]},e.id)}))})]}),Object(O.jsx)("section",{children:Object(O.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(O.jsx)(P,{selectedPostId:t,loadPostDetails:D})})})]})}))),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return b("/users".concat(e))},w=function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(!1),o=Object(r.a)(s,2),u=o[0],m=o[1],d=Object(i.useState)("All"),b=Object(r.a)(d,2),p=b[0],x=b[1],v=Object(i.useState)(null),_=Object(r.a)(v,2),N=_[0],P=_[1],w=function(){var e=Object(a.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,y();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("error",e.t0);case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){w()}),[]);return Object(O.jsxs)("div",{className:"App",children:[u?Object(O.jsx)(h,{}):Object(O.jsx)("header",{className:"App__header",children:Object(O.jsxs)("label",{children:["Select a user: \xa0",Object(O.jsxs)("select",{className:"App__user-selector",defaultValue:"All",onChange:function(e){return t=e.target.value,void x(t);var t},children:[Object(O.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Choose..."}),Object(O.jsx)("option",{value:"All",children:"All users"}),n.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})}),Object(O.jsxs)("main",{className:"App__main",children:[p&&Object(O.jsx)("div",{className:"App__sidebar",children:Object(O.jsx)(f,{currentUserId:p,selectedPostId:N,setSelectedPostId:P})}),Object(O.jsx)("div",{className:j()("App__content",{"App__content--empty":!N}),children:N&&Object(O.jsx)(g,{selectedPostId:N,setSelectedPostId:P})})]})]})};s.a.render(Object(O.jsx)(w,{}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.f2640c05.chunk.js.map